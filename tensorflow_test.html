<!--This file is partly written with AI (Model: Gemini 2.5 Flash (Thinking) https://t3.chat/chat/571b6c74-94f7-42b4-af90-b1d9a2060f3c-->
<!-- Load TensorFlow.js. This is required to use coco-ssd model. -->
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
<!-- Load the coco-ssd model. -->
<script src="https://cdn.cdnjsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@1.0.0"> </script>

<img
  id="img"
  src="https://s3.yhw.tw/data/animals/fox.jpg"
  class="w-1/2"
  crossorigin="anonymous"
/>

<p id="text"></p>
<p id="text2"></p>

<script>
  const img = document.getElementById('img');
  const text = document.getElementById('text');
  const text2 = document.getElementById('text2');

  // Load the coco-ssd model.
  cocoSsd
    .load()
    .then((model) => {
      // detect objects in the image.
      model
        .detect(img)
        .then((predictions) => {
          // Format coco-ssd predictions for display
          text.innerHTML = predictions
            .map(
              (p) =>
                `Detected: ${p.class} (Confidence: ${(p.score * 100).toFixed(
                  2
                )}%)`
            )
            .join('<br>'); // Join multiple predictions with a line break
        })
        .catch((error) => {
          text.innerHTML = `Error during detection: ${error.message}`;
          console.error('Detection error:', error);
        });
    })
    .catch((error) => {
      text.innerHTML = `Error loading model: ${error.message}`;
      console.error('Model loading error:', error);
    });

  mobilenet.load().then((model) => {
    // Classify the image.
    model.classify(img).then((predictions) => {
      // Format MobileNet predictions for display
      text2.innerHTML = predictions
        .map(
          (p) =>
            `Class: ${p.className} (Probability: ${(p.probability * 100).toFixed(
              2
            )}%)`
        )
        .join('<br>'); // Join multiple predictions with a line break
      console.log('Predictions: ');
      console.log(predictions);
    });
  });
</script>
