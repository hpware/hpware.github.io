<!-- Load TensorFlow.js. This is required to use coco-ssd model. -->
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
<!-- Load the coco-ssd model. -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@1.0.0"> </script>

<img
  id="img"
  src="https://s3.yhw.tw/data/animals/fox.jpg"
  class="w-1/2"
  crossorigin="anonymous"
/>

<p id="text"></p>
<p id="text2"></p>

<script>
  const img = document.getElementById('img');
  const text = document.getElementById('text');
  const text2 = document.getElementById('text2');
  // Load the model.
  cocoSsd
    .load()
    .then((model) => {
      // detect objects in the image.
      model
        .detect(img)
        .then((predictions) => {
          text.innerHTML = predictions;
        })
        .catch((error) => {
          text.innerHTML = `Error during detection: ${error.message}`;
          console.error('Detection error:', error);
        });
    })
    .catch((error) => {
      text.innerHTML = `Error loading model: ${error.message}`;
      console.error('Model loading error:', error);
    });

    mobilenet.load().then(model => {
    // Classify the image.
    model.classify(img).then(predictions => {
      text2.innerHTML= predictions;
      console.log('Predictions: ');
      console.log(predictions);
    });
  });
</script>
